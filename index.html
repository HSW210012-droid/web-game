<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>é¬¼æŠ“äººéŠæˆ² - å‡ç´šç‰ˆ</title>
<style>
    body {
        background-color: #222;
        color: white;
        text-align: center;
        font-family: Arial, sans-serif;
    }

    canvas {
        background-color: #eee;
        display: block;
        margin: 20px auto;
        border: 3px solid #555;
    }
</style>
</head>
<body>

<h1>ğŸ‘» é¬¼æŠ“äººéŠæˆ² - å‡ç´šç‰ˆ</h1>
<p>ä½¿ç”¨ â¬†â¬‡â¬…â¡ ç§»å‹•ï¼Œè¢«é¬¼æŠ“åˆ°å°±çµæŸï¼æ™‚é–“è¶Šé•·ï¼Œé¬¼è¶Šå¤šï¼</p>
<p id="time">ç”Ÿå­˜æ™‚é–“: 0 ç§’</p>

<canvas id="game" width="500" height="400"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// ç©å®¶
const player = {
    x: 250,
    y: 200,
    size: 20,
    speed: 5
};

// é¬¼åˆ—è¡¨
let ghosts = [
    {x: 50, y: 50, size: 20, speed: 2}
];

let gameOver = false;
let startTime = Date.now();

// éµç›¤æ§åˆ¶
const keys = {};
window.addEventListener("keydown", e => keys[e.key] = true);
window.addEventListener("keyup", e => keys[e.key] = false);

function movePlayer() {
    if (keys["ArrowUp"]) player.y -= player.speed;
    if (keys["ArrowDown"]) player.y += player.speed;
    if (keys["ArrowLeft"]) player.x -= player.speed;
    if (keys["ArrowRight"]) player.x += player.speed;

    // é‚Šç•Œé™åˆ¶
    player.x = Math.max(0, Math.min(canvas.width - player.size, player.x));
    player.y = Math.max(0, Math.min(canvas.height - player.size, player.y));
}

function moveGhosts() {
    ghosts.forEach(ghost => {
        if (ghost.x < player.x) ghost.x += ghost.speed;
        if (ghost.x > player.x) ghost.x -= ghost.speed;
        if (ghost.y < player.y) ghost.y += ghost.speed;
        if (ghost.y > player.y) ghost.y -= ghost.speed;
    });
}

function checkCollision() {
    return ghosts.some(ghost => {
        const dx = player.x - ghost.x;
        const dy = player.y - ghost.y;
        const distance = Math.sqrt(dx * dx + dy * dy);
        return distance < player.size;
    });
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // ç©å®¶
    ctx.fillStyle = "dodgerblue";
    ctx.fillRect(player.x, player.y, player.size, player.size);

    // é¬¼
    ctx.fillStyle = "red";
    ghosts.forEach(ghost => ctx.fillRect(ghost.x, ghost.y, ghost.size, ghost.size));
}

function updateTime() {
    const elapsed = Math.floor((Date.now() - startTime) / 1000);
    document.getElementById("time").innerText = `ç”Ÿå­˜æ™‚é–“: ${elapsed} ç§’`;

    // æ¯ 10 ç§’å¢åŠ ä¸€éš»é¬¼
    if (elapsed > 0 && elapsed % 10 === 0) {
        if (ghosts.length < elapsed / 10 + 1) { // ç¢ºä¿åªåŠ ä¸€æ¬¡
            ghosts.push({
                x: Math.random() * (canvas.width - 20),
                y: Math.random() * (canvas.height - 20),
                size: 20,
                speed: 2 + Math.random() // éš¨æ©Ÿé€Ÿåº¦
            });
        }
    }
}

function gameLoop() {
    if (gameOver) return;

    movePlayer();
    moveGhosts();
    draw();
    updateTime();

    if (checkCollision()) {
        gameOver = true;
        setTimeout(() => {
            const survived = Math.floor((Date.now() - startTime)/1000);
            alert(`ğŸ‘» ä½ è¢«é¬¼æŠ“åˆ°äº†ï¼ç”Ÿå­˜æ™‚é–“: ${survived} ç§’`);
            location.reload();
        }, 100);
    }

    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>

